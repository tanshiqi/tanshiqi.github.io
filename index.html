<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>atan</title>
  <meta name="author" content="atan">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="atan"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link href="/favicon.png" rel="apple-touch-icon-precomposed">

  <link rel="alternate" href="/atom.xml" title="atan" type="application/atom+xml">

  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="http://libs.baidu.com/jquery/1.10.2/jquery.min.js"></script>
  
  
    <script type="text/x-mathjax-config">
  MathJax.Hub.Config(
    {
      tex2jax: {inlineMath: [['$','$'], ['\(','\)']]},
      TeX: {equationNumbers: {autoNumber: ["AMS"], useLabelIds: true}},
    }
  );
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

  
</head>


<body>
    <div class="container">
      <div class="left-col">
        <div class="intrude-less">
          <header id="header" class="inner">
            <div class="profilepic">
  <script src="/js/md5.js"></script>
  <script type="text/javascript">
    $(function(){
	$('.profilepic').append(
          "<img src='http://www.gravatar.com/avatar/"
          + MD5("tanshiqi@gmail.com")
          + "?s=160' alt='Profile Picture' style='width: 160px;' />");
    });
  </script>
</div><!-- profilepic -->
<h1><a href="/">atan</a></h1>
<p class="subtitle">不务正业的设计师</p>
<nav id="main-nav">
  
  </section>
</nav><!-- main-nav -->
<nav id="sub-nav">
  <div class="social">
    
      <a class="twitter" href="http://twitter.com/atan"
         title="Twitter">Twitter</a>
    
    
      <a class="github" href="http://github.com/tanshiqi"
         title="Github">Github</a>
    
    
        <a class="rss" href="/atom.xml" title="RSS">RSS</a>
    
  </div>
</nav><!-- sub-nav -->


          <header>
        </div><!-- intrude-less -->
      </div><!-- left-col -->
      <div class="mid-col">
        <div class="mid-col-container">
	    <div id="content" class="inner"><div itemscope itemtype="http://schema.org/Blog">

  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  

	<div class="meta">
          
<div class="date">

<time datetime="2013-08-19T14:47:00.000Z"
      
      data-updated="true"
       itemprop="datePublished">
  Aug 19 2013
</time>






</div>

          

 
 <div class="tags">
   <a href="/tags/gearman/">gearman</a>, <a href="/tags/php/">php</a>, <a href="/tags/mysql/">mysql</a>
 </div>


          
	</div>
        <h1 class="title" itemprop="name">
          <a href="/gearman-installation/" itemprop="url">
            Gearman安装与简单使用</a>
        </h1>
        <div class="entry-content" itemprop="articleBody">
          
            <p>Gearman是开源、轻量级的任务分发程序框架，方便开发分布式的任务处理（计算）程序，Gearman支持多种后端数据的存储，也支持多种语言的客户端。</p>
<h3>编译安装gearman</h3>
<p>首先</p>
<pre><code><figure class="highlight"><pre>wget https://launchpad<span class="preprocessor">.net</span>/gearmand/<span class="number">1.2</span>/<span class="number">1.1</span><span class="number">.9</span>/+download/gearmand-<span class="number">1.1</span><span class="number">.9</span><span class="preprocessor">.tar</span><span class="preprocessor">.gz</span> 
</pre></figure></code></pre>
<p>也可以访问<a href="https://launchpad.net/gearmand/">https://launchpad.net/gearmand/</a>网站,下载最新版本,这里以1.1.9版本为例(目前最新),如果安装其他版本,请根据版本号修改就行了.</p>
<p>然后依次执行</p>
<pre><code><figure class="highlight"><pre>tar -xvzf  gearmand-<span class="number">1.1</span><span class="number">.9</span>.tar.gz 
cd gearmand-<span class="number">1.1</span><span class="number">.9</span> 
./configure (此步骤如果报错,可能有以下几种情况:
            [<span class="number">1</span>:configure: error: no acceptable C compiler found <span class="keyword">in</span> $PATH
             说明没有装gcc或g++编译环境,执行:apt-<span class="keyword">get</span> install build-essential]
            [<span class="number">2</span>:configure: error: cannot find Boost headers version &gt;= <span class="number">1.39</span><span class="number">.0</span>
             这是说没有安装boost包或库,执行:
             apt-<span class="keyword">get</span> install libboost-program-options-dev
             apt-<span class="keyword">get</span> install uuid-dev
             apt-<span class="keyword">get</span> install libevent-dev
             apt-<span class="keyword">get</span> install libdrizzle-dev
             apt-<span class="keyword">get</span> install gperf])
make  (此步骤如果报错:sorry, unimplemented: Graphite loop optimizations can only be used <span class="keyword">if</span> the libcloog-ppl0 <span class="package"><span class="keyword">package</span> <span class="title">is</span> <span class="title">installed</span>
       执行:<span class="title">apt</span>-<span class="title">get</span> <span class="title">install</span> <span class="title">libcloog</span>-<span class="title">ppl0</span>)
<span class="title">make</span> <span class="title">install</span>  
</pre></figure></code></pre>
<p>
            <a href="/gearman-installation/" class="more-link">
              Continue Reading →
            </2a>
          
        </div>


</article>




  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  

	<div class="meta">
          
<div class="date">

<time datetime="2013-07-15T21:52:00.000Z"
      
      data-updated="true"
       itemprop="datePublished">
  Jul 15 2013
</time>






</div>

          

 
 <div class="tags">
   <a href="/tags/flat/">flat</a>, <a href="/tags/google/">google</a>
 </div>


          
	</div>
        <h1 class="title" itemprop="name">
          <a href="/google-visual-assets-guidelines/" itemprop="url">
            Google Visual Assets Guidelines</a>
        </h1>
        <div class="entry-content" itemprop="articleBody">
          
            <p><img src="https://dl.dropboxusercontent.com/u/7061992/blog_images/Google_Visual_Assets_Guidelines.jpg" alt="Google Visual Assets Guidelines"><br>Google的扁平化设计，和IOS7有着完全不同的感觉：<br><a href="http://www.behance.net/gallery/Google-Visual-Assets-Guidelines-Part-1/9028077">Part 1: Product icons and logo lockups</a><br><a href="http://www.behance.net/gallery/Google-Visual-Assets-Guidelines-Part-2/9084309">Part 2: User interface icons and Illustrations</a></p>

          
        </div>


</article>




  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  

	<div class="meta">
          
<div class="date">

<time datetime="2013-07-15T15:44:00.000Z"
      
      data-updated="true"
       itemprop="datePublished">
  Jul 15 2013
</time>






</div>

          

 
 <div class="tags">
   <a href="/tags/lftp/">lftp</a>, <a href="/tags/sync/">sync</a>, <a href="/tags/upyun/">upyun</a>
 </div>


          
	</div>
        <h1 class="title" itemprop="name">
          <a href="/upyun-sync/" itemprop="url">
            又拍云的增量同步</a>
        </h1>
        <div class="entry-content" itemprop="articleBody">
          
            <p>最近在项目中使用了又拍云作为图片存储，访问速度大大加快了，确实是值得表扬的国内云存储服务。 但是实际使用中还有有小遗憾，比如图片的同步，又拍云只提供了API和FTP两种方式，而缺少了服务器间的rsync，所以感觉总是不是很方便，但是方法还是有的，lftp就是比较简单的方式，新建一个shell，内容如下：</p>
<pre><code><figure class="highlight"><pre><span class="shebang">#!/bin/bash</span>
HOST=<span class="string">"v0.ftp.upyun.com"</span>
USER=<span class="string">"upyun_username"</span> <span class="comment">//FTP用户名</span>
PASS=<span class="string">"upyun_password"</span> <span class="comment">//密码</span>
LCD=<span class="string">"localpath"</span> <span class="comment">//远程目录</span>
RCD=<span class="string">"remotepath"</span> <span class="comment">//本地目录</span>
lftp -c <span class="string">"open ftp://$HOST;
user $USER $PASS;
lcd $LCD;
cd $RCD;
mirror -e -v"</span>
</pre></figure></code></pre>
<p>然后设置一个CRON，定时执行，就可以实现本地和远程的增量同步了，缺陷也是有的，CRON再怎么说也不能做到实时，对时效性比较高的还是不要采用此方案了。</p>

          
        </div>


</article>




  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  

	<div class="meta">
          
<div class="date">

<time datetime="2013-05-17T14:16:00.000Z"
      
      data-updated="true"
       itemprop="datePublished">
  May 17 2013
</time>






</div>

          

 
 <div class="tags">
   <a href="/tags/line-endings/">line-endings</a>
 </div>


          
	</div>
        <h1 class="title" itemprop="name">
          <a href="/bash-line-endings/" itemprop="url">
            BASH下批量替换line endings</a>
        </h1>
        <div class="entry-content" itemprop="articleBody">
          
            <p>从windows上拷贝过来的原文件和linux上的line endings不同，导致git提交的时候产生一推修改，其实bash下只要简单的转换一下line endings就立即让git清爽了很多<br>首先安装dos2unix:</p>
<pre><code><figure class="highlight"><pre>su<span class="operator"><span class="keyword">do</span> apt-<span class="keyword">get</span> install dos2unix
</pre></figure></code></pre>
<p>然后就可以执行：</p>
<pre><code><figure class="highlight"><pre><span class="comment">find</span> <span class="string">.</span> <span class="literal">-</span><span class="comment">name</span> <span class="comment">"*"</span> <span class="literal">-</span><span class="comment">type</span> <span class="comment">f</span> <span class="literal">-</span><span class="comment">exec</span> <span class="comment">dos2unix</span> <span class="comment">{}</span> <span class="comment">\;
</pre></figure></code></pre>

          
        </div>


</article>




  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  

	<div class="meta">
          
<div class="date">

<time datetime="2013-04-27T20:46:00.000Z"
      
      data-updated="true"
       itemprop="datePublished">
  Apr 27 2013
</time>






</div>

          

 
 <div class="tags">
   <a href="/tags/vagrant/">vagrant</a>
 </div>


          
	</div>
        <h1 class="title" itemprop="name">
          <a href="/vagrant/" itemprop="url">
            vagrant 使用笔记</a>
        </h1>
        <div class="entry-content" itemprop="articleBody">
          
            <p>最近试用了一下vagrant，确实得佩服一下ruby社区的创造力，vagrant对于搭建开发环境简单到像过家家一样，本地开发于虚拟机结合的巧妙而又顺畅。以下只是我个人的一些总结纪录。<br>官方网站：<a href="http://www.vagrantup.com/">http://www.vagrantup.com/</a><br>镜像box：<a href="http://www.vagrantbox.es/">http://www.vagrantbox.es/</a> 国内访问不是很快 安装好后就可以：</p>
<pre><code><figure class="highlight"><pre>$ vagrant init precise32 http:<span class="comment">//files.vagrantup.com/precise32.box</span>
$ vagrant up

vagrant ssh <span class="comment">//连接虚拟机的ssh  </span>
vagrant up <span class="comment">//开机  </span>
vagrant halt <span class="comment">//关机  </span>
vagrant reload <span class="comment">//重启</span>
</pre></figure></code></pre>
<p>
            <a href="/vagrant/" class="more-link">
              Continue Reading →
            </2a>
          
        </div>


</article>




  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  

	<div class="meta">
          
<div class="date">

<time datetime="2013-04-17T20:29:00.000Z"
      
      data-updated="true"
       itemprop="datePublished">
  Apr 17 2013
</time>






</div>

          

 
 <div class="tags">
   <a href="/tags/federated/">federated</a>, <a href="/tags/mysql/">mysql</a>, <a href="/tags/view/">view</a>
 </div>


          
	</div>
        <h1 class="title" itemprop="name">
          <a href="/federated-view/" itemprop="url">
            原来Federated引擎可以关联视图</a>
        </h1>
        <div class="entry-content" itemprop="articleBody">
          
            <p>刚才尝试了一下确实可以，这下方便好多了，如下：</p>
<pre><code><figure class="highlight"><pre><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`test_table`</span> (
  <span class="string">`id`</span> <span class="keyword">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,
  <span class="keyword">PRIMARY</span> <span class="keyword">KEY</span> (<span class="string">`id`</span>)
) ENGINE=InnoDB <span class="keyword">DEFAULT</span> CHARSET=utf8;</span>

<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> <span class="string">`test_view`</span> <span class="keyword">AS</span>
<span class="keyword">select</span> * <span class="keyword">from</span> test_table;</span>

<span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`test_federated`</span> (
  <span class="string">`id`</span> <span class="keyword">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>
) ENGINE=FEDERATED <span class="keyword">DEFAULT</span> CHARSET=utf8 <span class="keyword">CONNECTION</span>=<span class="string">'mysql://user:password@127.0.0.1:3306/test/test_view'</span>;</span>
</pre></figure></code></pre>

          
        </div>


</article>




  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  

	<div class="meta">
          
<div class="date">

<time datetime="2013-03-12T10:23:00.000Z"
      
      data-updated="true"
       itemprop="datePublished">
  Mar 12 2013
</time>






</div>

          

 
 <div class="tags">
   <a href="/tags/flickr/">flickr</a>, <a href="/tags/upload/">upload</a>
 </div>


          
	</div>
        <h1 class="title" itemprop="name">
          <a href="/flickr-upload/" itemprop="url">
            flickr_upload命令行批量上传照片至Flickr</a>
        </h1>
        <div class="entry-content" itemprop="articleBody">
          
            <p>自从买了 <a href="http://www.wdc.com/cn/products/products.aspx?id=280" target="_blank">WD MyBook Live</a> 后，宝宝的照片终于有了去处，估算了一下，按照目前照片数量的增长幅度，这个东东里的照片可以保存到宝宝40岁~</p>
<p>其实照片放在本地我也是不放心的，于是乎购买了 <a href="http://www.flickr.com/" target="_blank">Flickr</a> 的 pro 帐号（无限上传，单张50M，这辈子应该够了）用来做网络备份。</p>
<p>Flickr本身提供HTML5版本的在线上传界面，单次最高上传200张，如果照片不多还是很好用的，但是我基本上一个月的照片在1000张左右，每次等待上传的时间太漫长了，那么需要解决的就是能有个脚本能将我上传到 MBL 里的照片自动传到 Flickr 上，并且不限制数量。MBL的系统debian的，于是找到了这个工具：<a href="http://search.cpan.org/~cpb/Flickr-Upload/" target="_blank">flickr_upload</a>。</p>
<p>
            <a href="/flickr-upload/" class="more-link">
              Continue Reading →
            </2a>
          
        </div>


</article>




  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  

	<div class="meta">
          
<div class="date">

<time datetime="2013-03-06T22:26:00.000Z"
      
      data-updated="true"
       itemprop="datePublished">
  Mar 6 2013
</time>






</div>

          

 
 <div class="tags">
   <a href="/tags/chrome/">chrome</a>, <a href="/tags/html5/">html5</a>, <a href="/tags/javascript/">javascript</a>, <a href="/tags/notify/">notify</a>
 </div>


          
	</div>
        <h1 class="title" itemprop="name">
          <a href="/chrome-desktop-notification/" itemprop="url">
            Chrome desktop notification</a>
        </h1>
        <div class="entry-content" itemprop="articleBody">
          
            <p>Chrome 桌面消息通知推送示例:</p>
<pre><code><figure class="highlight"><pre><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript">
<span class="function"><span class="keyword">function</span> <span class="title">notify</span><span class="params">()</span> {</span>
    <span class="keyword">var</span> havePermission = window.webkitNotifications.checkPermission();
    <span class="keyword">if</span> (havePermission == <span class="number">0</span>) { <span class="comment">// 0 is PERMISSION_ALLOWED</span>
        <span class="keyword">var</span> notification = window.webkitNotifications.createNotification(
            <span class="string">'http://i.stack.imgur.com/dmHl0.png'</span>,
            <span class="string">'Chrome notification!'</span>,
            <span class="string">'Here is the notification text'</span>
            );

        notification.onclick = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
            window.open(<span class="string">"http://www.google.com"</span>);
            notification.close();
        }
        notification.show();
    } <span class="keyword">else</span> {
        window.webkitNotifications.requestPermission();
    }
} 
</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>    
<span class="tag">&lt;<span class="title">button</span> <span class="attribute">onclick</span>=<span class="value">"notify()"</span>&gt;</span>Cick here to notify<span class="tag">&lt;/<span class="title">button</span>&gt;</span>
</pre></figure></code></pre>
<p>扩展阅读：<a href="http://www.html5rocks.com/en/tutorials/notifications/quick/">Using the Notifications API</a></p>

          
        </div>


</article>




  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  

	<div class="meta">
          
<div class="date">

<time datetime="2013-01-22T00:46:00.000Z"
      
      data-updated="true"
       itemprop="datePublished">
  Jan 22 2013
</time>






</div>

          

 
 <div class="tags">
   <a href="/tags/redis/">redis</a>, <a href="/tags/webdis/">webdis</a>, <a href="/tags/websocket/">websocket</a>
 </div>


          
	</div>
        <h1 class="title" itemprop="name">
          <a href="/webdis-websocket/" itemprop="url">
            Webdis 学习笔记（二）Websocket</a>
        </h1>
        <div class="entry-content" itemprop="articleBody">
          
            <p>在<a href="./post/webdis-install">上一篇</a>中提到webdis内带了一个websocket接口，下面就用来测试一下redis的PUB/SUB功能，实现“消息推送”。</p>
<p>新建一个websocket.html，内容如下：</p>
<pre><code><figure class="highlight"><pre><span class="doctype">&lt;!doctype html&gt;</span>
<span class="tag">&lt;<span class="title">html</span>&gt;</span>
<span class="tag">&lt;<span class="title">head</span>&gt;</span><span class="tag">&lt;/<span class="title">head</span>&gt;</span>
<span class="tag">&lt;<span class="title">body</span>&gt;</span>
    <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript">
        <span class="keyword">var</span> jsonSocket = <span class="keyword">new</span> WebSocket(<span class="string">"ws://127.0.0.1:7379/"</span>);
        jsonSocket.onopen = <span class="keyword">function</span>() {
            console.log(<span class="string">"JSON socket connected!"</span>);
            jsonSocket.send(JSON.stringify([<span class="string">"SUBSCRIBE"</span>, <span class="string">"test"</span>]));
        };
        jsonSocket.onmessage = <span class="keyword">function</span>(messageEvent) {
            console.log(messageEvent.data);
        };
        jsonSocket.onclose = <span class="keyword">function</span>() {
            console.log(<span class="string">"JSON closed"</span>);
        };
    </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
<span class="tag">&lt;/<span class="title">body</span>&gt;</span>
<span class="tag">&lt;/<span class="title">html</span>&gt;</span>
</pre></figure></code></pre>
<p>
            <a href="/webdis-websocket/" class="more-link">
              Continue Reading →
            </2a>
          
        </div>


</article>




  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  

	<div class="meta">
          
<div class="date">

<time datetime="2013-01-22T00:10:00.000Z"
      
      data-updated="true"
       itemprop="datePublished">
  Jan 22 2013
</time>






</div>

          

 
 <div class="tags">
   <a href="/tags/redis/">redis</a>, <a href="/tags/webdis/">webdis</a>, <a href="/tags/websocket/">websocket</a>
 </div>


          
	</div>
        <h1 class="title" itemprop="name">
          <a href="/webdis-install/" itemprop="url">
            Webdis 学习笔记（一）安装</a>
        </h1>
        <div class="entry-content" itemprop="articleBody">
          
            <p><a href="http://webd.is/">webdis</a> 是一个简单的 Web 服务器，提供了 HTTP 接口来访问 Redis 服务器。</p>
<ol>
<li><p>安装方法比较简单，官方网站上有写：</p>
<pre><code><figure class="highlight"><pre><span class="title">git</span> clone git://github.com/nicolasff/webdis.git
<span class="title">cd</span> webdis
<span class="title">make</span>
</pre></figure></code></pre>
</li>
</ol>
<p>
            <a href="/webdis-install/" class="more-link">
              Continue Reading →
            </2a>
          
        </div>


</article>




</div>

<nav id="pagenavi">
    
    
        <a href="/page/2/" class="next">
          Next
        </a>
    
    <div class="center">
      <a href="archives">Blog Archives</a>
    </div>
</nav>
</div>
	</div>
        <footer id="footer" class="inner">
          Copyright © 2013 - atan - Powered by <a href="https://github.com/tommy351/hexo">Hexo</a><br>
- Ported theme <a href="https://github.com/nuklly/hexo-theme-greyshade">GreyShade</a> -
        </footer>
        
<script src="/js/slash.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
  var disqus_shortname = 'atanblog';

  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  }());
  </script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>




      </div><!-- mid-col -->
    </div><!-- container -->
</body>
</html>
